{"version":3,"file":"main-G5sCyNoy.js","sources":["../../project/js/main.js"],"sourcesContent":["import { ThreeAnimation } from './three-animation.js';\nconsole.log(\"main\");\n// L'animation démarre automatiquement car elle est initialisée dans three-animation.js\nwindow.addEventListener('beforeunload', () => {\n    // Cleanup si nécessaire\n    if (window.threeAnimation) {\n        // Supprimer les event listeners\n        window.removeEventListener('resize', window.threeAnimation.onResize);\n        window.removeEventListener('mousemove', window.threeAnimation.onMouseMove);\n        \n        // Nettoyer la scène\n        window.threeAnimation.gridPoints.forEach(point => {\n            point.geometry.dispose();\n            point.material.dispose();\n        });\n        \n        // Supprimer le canvas\n        const canvas = document.querySelector('canvas');\n        if (canvas) {\n            canvas.remove();\n        }\n    }\n});\n\nconst transitionTime = 700;\nconst fadeOutDuration = 700; // Durée de l'animation de disparition\n\n// Configuration des éléments par page\nconst pageConfig = {\n    'index.html': {\n        top: 'header',\n        center: '.container',\n        bottom: 'footer'\n    },\n    'projects.html': {\n        top: 'header',\n        center: '.menu-projects-content',\n        bottom: 'footer'\n    },\n    'about.html': {\n        top: 'header',\n        center: '.about-container',\n        bottom: 'footer'\n    },\n    'contact.html': {\n        top: 'header',\n        center: '.contact-container',\n        bottom: 'footer'\n    }\n};\n\n// Fonction pour obtenir la configuration de la page actuelle\nfunction getCurrentPageConfig() {\n    const path = window.location.pathname;\n    console.log('Full path:', path);\n    \n    // Get the last segment of the path and remove any trailing slash\n    let page = path.split('/').filter(Boolean).pop() || '';\n    \n    // Map path segments to their corresponding HTML pages\n    const pageMap = {\n        '': 'index.html',\n        'projects': 'projects.html',\n        'about': 'about.html',\n        'contact': 'contact.html'\n    };\n    \n    // Get the actual page name or default to index.html\n    const actualPage = pageMap[page] || 'index.html';\n    console.log('Detected page:', actualPage);\n    \n    return pageConfig[actualPage];\n}\n\n// Animation d'apparition\nfunction fadeInUi() {\n    console.log(\"hey0\");\n    const config = getCurrentPageConfig();\n    if (!config) return;\n    console.log(\"hey1\");\n    const header = document.querySelector(config.top);\n    const container = document.querySelector(config.center);\n    const footer = document.querySelector(config.bottom);\n\n    // Function to animate an element and its children\n    const animateElement = (element, delay = 0) => {\n        if (!element) return;\n        \n        setTimeout(() => {\n            element.classList.add('fade-transition');\n            \n            // Animate direct children with a stagger\n            Array.from(element.children).forEach((child, index) => {\n                setTimeout(() => {\n                    child.classList.add('fade-transition');\n                }, index * 100);\n            });\n        }, delay);\n    };\n\n    // Trigger animations in sequence\n    requestAnimationFrame(() => {\n        animateElement(header, 200);\n        animateElement(container, 400);\n        animateElement(footer, 600);\n\n        // Handle bento items separately if they exist\n        const bentoItems = document.querySelectorAll('.bento-item');\n        bentoItems.forEach((item, index) => {\n            setTimeout(() => {\n                item.classList.add('fade-transition');\n                item.classList.add('visible');\n            }, 800 + (index * 100));\n        });\n    });\n}\n\n// Animation de disparition\nexport function fadeOutUi() {\n    const config = getCurrentPageConfig();\n    if (!config) return;\n\n    const header = document.querySelector(config.top);\n    const container = document.querySelector(config.center);\n    const footer = document.querySelector(config.bottom);\n\n    // Function to fade out an element and its children\n    const fadeOutElement = (element, delay = 0) => {\n        if (!element) return;\n        \n        setTimeout(() => {\n            // Remove transition class and add fade-initial to trigger fade out\n            element.classList.remove('fade-transition');\n            element.classList.add('fade-initial');\n            \n            // Fade out children with stagger\n            Array.from(element.children).forEach((child, index) => {\n                setTimeout(() => {\n                    child.classList.remove('fade-transition');\n                    child.classList.add('fade-initial');\n                }, index * 50); // Faster stagger for fade out\n            });\n        }, delay);\n    };\n\n    // Fade out in reverse order of appearance\n    requestAnimationFrame(() => {\n        fadeOutElement(footer, 0);\n        fadeOutElement(container, 100);\n        fadeOutElement(header, 200);\n\n        // Handle bento items if they exist\n        const bentoItems = document.querySelectorAll('.bento-item');\n        bentoItems.forEach((item, index) => {\n            setTimeout(() => {\n                item.classList.remove('visible', 'hover', 'fade-transition');\n                item.classList.add('fade-initial');\n            }, index * 50);\n        });\n    });\n}\n\n// Show popup only once using localStorage\nfunction showPopupOnce() {\n    const hasSeenPopup = localStorage.getItem('hasSeenPopup');\n    \n    if (!hasSeenPopup) {\n        const popup = document.getElementById('popup-overlay');\n        const closeButton = document.getElementById('close-popup');\n        \n        // Show popup with animation\n        setTimeout(() => {\n            popup.classList.add('show');\n        }, 1000); // Show after 1 second\n        \n        // Handle close button\n        closeButton.addEventListener('click', () => {\n            popup.classList.remove('show');\n            localStorage.setItem('hasSeenPopup', 'true');\n        });\n    }\n}\n\n// Initialize animations\nfunction initializeAnimations() {\n    console.log('Initializing animations...'); // Debug log\n    const config = getCurrentPageConfig();\n    console.log('Got config:', config); // Debug log\n    if (!config) {\n        console.log('No config found for current page'); // Debug log\n        return;\n    }\n\n    // Get elements\n    const elements = [\n        document.querySelector(config.top),\n        document.querySelector(config.center),\n        document.querySelector(config.bottom)\n    ].filter(Boolean);\n\n    console.log('Found elements:', elements.length); // Debug log\n\n    // Add initial state to all elements and their children\n    elements.forEach(element => {\n        element.classList.add('fade-initial');\n        Array.from(element.children).forEach(child => {\n            child.classList.add('fade-initial');\n        });\n    });\n\n    // Start animations after a brief delay\n    console.log('Starting fadeInUi in 100ms...'); // Debug log\n    setTimeout(fadeInUi, 100);\n    \n    showPopupOnce();\n}\n\n// Event listeners for page load\nconsole.log('Document ready state:', document.readyState); // Debug log\nif (document.readyState === 'loading') {\n    console.log('Adding DOMContentLoaded listener'); // Debug log\n    document.addEventListener('DOMContentLoaded', initializeAnimations);\n} else {\n    console.log('Document already loaded, initializing now'); // Debug log\n    initializeAnimations();\n}\n\n// Handle back/forward navigation\nwindow.addEventListener('pageshow', (event) => {\n    if (event.persisted) {\n        initializeAnimations();\n    }\n});\n\n// Gérer les clics sur les liens\ndocument.addEventListener('DOMContentLoaded', () => {\n    document.querySelectorAll('a[href]').forEach(link => {\n        link.addEventListener('click', function(e) {\n            // Ignorer les liens externes, ancres, mailto et tel\n            if (\n                this.getAttribute('target') === '_blank' || \n                this.getAttribute('href').startsWith('#') ||\n                this.getAttribute('href').startsWith('mailto:') ||\n                this.getAttribute('href').startsWith('tel:')\n            ) {\n                return;\n            }\n\n            e.preventDefault();\n            const destination = this.getAttribute('href');\n\n            // Lancer les animations de disparition\n            fadeOutUi();\n            if (window.threeAnimation) {\n                window.threeAnimation.fadeOutPoints(fadeOutDuration);\n            }\n            \n            // Changer de page après le délai\n            setTimeout(() => {\n                window.location.href = destination;\n            }, transitionTime);\n        });\n    });\n});"],"names":["point","canvas","transitionTime","fadeOutDuration","pageConfig","getCurrentPageConfig","path","page","actualPage","fadeInUi","config","header","container","footer","animateElement","element","delay","child","index","item","fadeOutUi","fadeOutElement","showPopupOnce","popup","closeButton","initializeAnimations","elements","event","link","e","destination"],"mappings":"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"}
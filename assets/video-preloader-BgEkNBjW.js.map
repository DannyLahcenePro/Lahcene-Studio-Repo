{"version":3,"file":"video-preloader-BgEkNBjW.js","sources":["../../project/js/video-preloader.js"],"sourcesContent":["class VideoPreloader {\n    constructor() {\n        this.videos = [\n            'ProjetMajGeneratif.mp4',\n            'ProjetMajMTH2.mp4',\n            'ProjetMajVarType.mp4',\n            'ProjetMajDalcans2.mp4',\n            'ProjetLedra.mp4'\n        ];\n        \n        this.loadedVideos = new Map();\n        this.totalProgress = 0;\n        this.videosLoaded = 0;\n    }\n\n    async preloadVideos() {\n        console.log('Starting video preload...');\n        \n        const preloadPromises = this.videos.map(videoSrc => this.preloadVideo(videoSrc));\n        \n        try {\n            await Promise.all(preloadPromises);\n            console.log('All videos preloaded successfully!');\n            return this.loadedVideos;\n        } catch (error) {\n            console.warn('Some videos failed to preload:', error);\n            return this.loadedVideos;\n        }\n    }\n\n    preloadVideo(videoSrc) {\n        return new Promise((resolve, reject) => {\n            console.log(`Tentative de chargement de la vidéo: ${videoSrc}`);\n            \n            const video = document.createElement('video');\n            video.preload = 'auto';\n            video.muted = true;\n            video.playsInline = true;\n\n            // Créer un blob URL pour la vidéo\n            fetch(videoSrc)\n                .then(response => {\n                    if (!response.ok) {\n                        console.error(`Erreur HTTP pour ${videoSrc}: ${response.status}`);\n                        throw new Error(`HTTP error! status: ${response.status}`);\n                    }\n                    console.log(`Réponse reçue pour ${videoSrc}`);\n                    return response.blob();\n                })\n                .then(blob => {\n                    console.log(`Blob créé pour ${videoSrc}, taille: ${blob.size} bytes`);\n                    const blobUrl = URL.createObjectURL(blob);\n                    video.src = blobUrl;\n                    this.loadedVideos.set(videoSrc, {\n                        blobUrl,\n                        video\n                    });\n                    \n                    this.videosLoaded++;\n                    this.totalProgress = (this.videosLoaded / this.videos.length) * 100;\n                    console.log(`Progrès: ${this.totalProgress}% - Vidéo chargée: ${videoSrc}`);\n                    this.updateProgress();\n                    \n                    resolve(video);\n                })\n                .catch(error => {\n                    console.error(`Échec du chargement de ${videoSrc}:`, error);\n                    reject(error);\n                });\n        });\n    }\n\n    updateProgress() {\n        // Émettre un événement personnalisé pour le progrès\n        const event = new CustomEvent('videoPreloadProgress', {\n            detail: {\n                progress: this.totalProgress,\n                videosLoaded: this.videosLoaded,\n                totalVideos: this.videos.length\n            }\n        });\n        window.dispatchEvent(event);\n    }\n\n    getVideo(videoSrc) {\n        return this.loadedVideos.get(videoSrc);\n    }\n}\n\n// Créer et exporter une instance unique\nconst videoPreloader = new VideoPreloader();\nexport default videoPreloader; "],"names":["VideoPreloader","preloadPromises","videoSrc","error","resolve","reject","video","response","blob","blobUrl","event","videoPreloader"],"mappings":"AAAA,MAAMA,CAAe,CACjB,aAAc,CACV,KAAK,OAAS,CACV,yBACA,oBACA,uBACA,wBACA,iBACH,EAED,KAAK,aAAe,IAAI,IACxB,KAAK,cAAgB,EACrB,KAAK,aAAe,CAC5B,CAEI,MAAM,eAAgB,CAClB,QAAQ,IAAI,2BAA2B,EAEvC,MAAMC,EAAkB,KAAK,OAAO,IAAIC,GAAY,KAAK,aAAaA,CAAQ,CAAC,EAE/E,GAAI,CACA,aAAM,QAAQ,IAAID,CAAe,EACjC,QAAQ,IAAI,oCAAoC,EACzC,KAAK,YACf,OAAQE,EAAO,CACZ,eAAQ,KAAK,iCAAkCA,CAAK,EAC7C,KAAK,YACxB,CACA,CAEI,aAAaD,EAAU,CACnB,OAAO,IAAI,QAAQ,CAACE,EAASC,IAAW,CACpC,QAAQ,IAAI,wCAAwCH,CAAQ,EAAE,EAE9D,MAAMI,EAAQ,SAAS,cAAc,OAAO,EAC5CA,EAAM,QAAU,OAChBA,EAAM,MAAQ,GACdA,EAAM,YAAc,GAGpB,MAAMJ,CAAQ,EACT,KAAKK,GAAY,CACd,GAAI,CAACA,EAAS,GACV,cAAQ,MAAM,oBAAoBL,CAAQ,KAAKK,EAAS,MAAM,EAAE,EAC1D,IAAI,MAAM,uBAAuBA,EAAS,MAAM,EAAE,EAE5D,eAAQ,IAAI,sBAAsBL,CAAQ,EAAE,EACrCK,EAAS,KAAM,CACzB,CAAA,EACA,KAAKC,GAAQ,CACV,QAAQ,IAAI,kBAAkBN,CAAQ,aAAaM,EAAK,IAAI,QAAQ,EACpE,MAAMC,EAAU,IAAI,gBAAgBD,CAAI,EACxCF,EAAM,IAAMG,EACZ,KAAK,aAAa,IAAIP,EAAU,CAC5B,QAAAO,EACA,MAAAH,CACxB,CAAqB,EAED,KAAK,eACL,KAAK,cAAiB,KAAK,aAAe,KAAK,OAAO,OAAU,IAChE,QAAQ,IAAI,YAAY,KAAK,aAAa,sBAAsBJ,CAAQ,EAAE,EAC1E,KAAK,eAAgB,EAErBE,EAAQE,CAAK,CAChB,CAAA,EACA,MAAMH,GAAS,CACZ,QAAQ,MAAM,0BAA0BD,CAAQ,IAAKC,CAAK,EAC1DE,EAAOF,CAAK,CAChC,CAAiB,CACjB,CAAS,CACT,CAEI,gBAAiB,CAEb,MAAMO,EAAQ,IAAI,YAAY,uBAAwB,CAClD,OAAQ,CACJ,SAAU,KAAK,cACf,aAAc,KAAK,aACnB,YAAa,KAAK,OAAO,MACzC,CACA,CAAS,EACD,OAAO,cAAcA,CAAK,CAClC,CAEI,SAASR,EAAU,CACf,OAAO,KAAK,aAAa,IAAIA,CAAQ,CAC7C,CACA,CAGK,MAACS,EAAiB,IAAIX"}